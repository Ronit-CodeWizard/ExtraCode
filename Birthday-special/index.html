<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1">
<title>Birthday Surprise üéÄ</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{background:#000;min-height:100vh;display:flex;flex-direction:column;align-items:center;font-family:Arial,sans-serif;overflow-x:hidden}

.main{width:100%;max-width:500px;flex:1;position:relative;overflow:hidden}
.screen{display:none;width:100%;min-height:360px;flex-direction:column;align-items:center;justify-content:center;padding:22px 18px;position:relative;animation:fadeIn .4s ease}
.screen.active{display:flex}
@keyframes fadeIn{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}
.bottom-bar{width:100%;max-width:500px;background:#000;height:50px;flex-shrink:0}

/* PROGRESS */
.progress-wrap{position:fixed;top:0;left:50%;transform:translateX(-50%);width:100%;max-width:500px;z-index:100;height:4px;background:rgba(255,255,255,.1)}
.progress-fill{height:4px;background:linear-gradient(90deg,#e91e8c,#f48fb1,#e91e8c);transition:width .5s ease;background-size:200%;animation:shimmer 2s linear infinite}
@keyframes shimmer{0%{background-position:0%}100%{background-position:200%}}
.screen-counter{position:fixed;bottom:58px;left:50%;transform:translateX(-50%);color:rgba(255,255,255,.45);font-size:10px;z-index:99;font-family:'Arial Black',sans-serif;letter-spacing:1px}

/* FOOTER */
.footer-cv{display:flex;justify-content:space-between;width:100%;padding:3px 0;font-size:9px;color:rgba(0,0,0,.3);margin-top:5px}
.footer-cv-w{color:rgba(255,255,255,.3)}

/* ====== INTRO ====== */
#s-intro{background:#000;min-height:400px}
.star-canvas{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none}
.intro-text{text-align:center;z-index:2;color:#fff;position:relative}
.intro-big{font-size:38px;font-weight:900;font-family:'Arial Black',sans-serif;background:linear-gradient(135deg,#f48fb1,#e91e8c,#f48fb1);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-size:200%;animation:gradShift 3s ease infinite}
@keyframes gradShift{0%,100%{background-position:0%}50%{background-position:100%}}
.intro-sub{font-size:15px;color:rgba(255,255,255,.75);margin-top:8px;animation:pulseOp 1.5s ease-in-out infinite}
@keyframes pulseOp{0%,100%{opacity:.6}50%{opacity:1}}
.btn-start{background:linear-gradient(135deg,#e91e8c,#ad1457);color:#fff;border:none;padding:14px 40px;border-radius:50px;font-size:15px;font-weight:900;cursor:pointer;margin-top:24px;box-shadow:0 4px 20px rgba(233,30,140,.5);font-family:'Arial Black',sans-serif;display:inline-flex;align-items:center;gap:10px}

/* ====== TTT ====== */
#s-ttt{background:linear-gradient(145deg,#ffd6e7,#ffb3ce 40%,#ff85b3)}
.ttt-title{font-size:22px;font-weight:700;color:#c2185b;margin-bottom:5px;letter-spacing:1px}
.ttt-turn{font-size:13px;color:#ad1457;font-weight:600;margin-bottom:12px;height:18px}
.ttt-board{display:grid;grid-template-columns:repeat(3,74px);grid-template-rows:repeat(3,74px);gap:6px;background:rgba(255,255,255,.25);border-radius:18px;padding:12px}
.cell{width:74px;height:74px;background:rgba(255,255,255,.82);border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:28px;font-weight:900;cursor:pointer;transition:background .15s,transform .1s;user-select:none;box-shadow:0 2px 8px rgba(0,0,0,.08)}
.cell:hover:not(.taken){background:#fff;transform:scale(1.05)}
.cell.x{color:#c2185b;cursor:default}.cell.o{color:#e91e8c;cursor:default}
.cell.win-cell{background:#ffe0f0;animation:wincell .4s ease}
@keyframes wincell{0%,100%{transform:scale(1)}50%{transform:scale(1.12)}}
.ttt-btns{display:flex;flex-direction:column;align-items:center;gap:9px;margin-top:16px}
.btn-restart{background:#f06292;color:#fff;border:none;padding:9px 22px;border-radius:50px;font-size:13px;font-weight:700;cursor:pointer;display:inline-flex;align-items:center;gap:7px}
.btn-next-pink{background:#e91e8c;color:#fff;border:none;padding:10px 32px;border-radius:50px;font-size:14px;font-weight:800;cursor:pointer;box-shadow:0 3px 14px rgba(233,30,140,.4);display:inline-flex;align-items:center;gap:8px}
.win-overlay{display:none;position:absolute;top:0;left:0;right:0;bottom:0;background:rgba(255,182,205,.55);align-items:center;justify-content:center;z-index:20}
.win-overlay.show{display:flex}
.win-card{background:#fff;border-radius:18px;padding:22px 36px;text-align:center;box-shadow:0 8px 32px rgba(233,30,140,.25);animation:pop .4s cubic-bezier(.34,1.56,.64,1)}
@keyframes pop{from{transform:scale(.4);opacity:0}to{transform:scale(1);opacity:1}}
.win-hearts{font-size:22px}.win-text{font-size:20px;font-weight:800;color:#c2185b;margin:10px 0 14px}
.btn-win-next{background:#e91e8c;color:#fff;border:none;padding:10px 32px;border-radius:50px;font-size:14px;font-weight:800;cursor:pointer;box-shadow:0 3px 14px rgba(233,30,140,.4);display:inline-flex;align-items:center;gap:8px}
.sparkle-deco{position:absolute;pointer-events:none;font-size:14px;animation:sparkSpin 3s ease-in-out infinite}
@keyframes sparkSpin{0%,100%{opacity:.4;transform:scale(1) rotate(0)}50%{opacity:1;transform:scale(1.3) rotate(180deg)}}

/* ====== BDAY ====== */
#s-bday{background:#c8d8f5;min-height:380px;padding:20px}
@keyframes bdayBounce{0%,100%{transform:translateY(0)}50%{transform:translateY(-7px)}}
.bday-hb-img{width:260px;height:auto;animation:bdayBounce 2s ease-in-out infinite}
.bday-happy-txt{font-size:30px;color:#90caf9;font-weight:900;-webkit-text-stroke:2px #64b5f6;letter-spacing:4px;font-family:'Arial Black',sans-serif}
.bday-bday-txt{font-size:36px;color:#f48fb1;font-weight:900;-webkit-text-stroke:2px #e91e8c;letter-spacing:3px;font-family:'Arial Black',sans-serif}
.btn-next-blue{background:#5c6bc0;color:#fff;border:none;padding:11px 36px;border-radius:50px;font-size:15px;font-weight:800;cursor:pointer;box-shadow:0 4px 16px rgba(92,107,192,.4);margin-top:14px;display:inline-flex;align-items:center;gap:8px}
.float-heart{position:absolute;pointer-events:none;animation:floatUp linear infinite;opacity:0;bottom:-30px}
@keyframes floatUp{0%{transform:translateY(0) scale(1);opacity:.8}100%{transform:translateY(-420px) scale(.3);opacity:0}}

/* ====== LETTER ====== */
#s-letter{background:linear-gradient(160deg,#fff8e1,#fff3e0);min-height:400px}
.letter-envelope{font-size:70px;animation:envShake 1s ease infinite;cursor:pointer}
@keyframes envShake{0%,100%{transform:rotate(-3deg)}50%{transform:rotate(3deg)}}
.letter-paper{background:#fffde7;border-radius:12px;padding:20px;max-width:300px;width:100%;box-shadow:0 4px 20px rgba(0,0,0,.1);border:1px solid #ffe082;margin:14px 0;position:relative}
.letter-paper::before{content:'"';font-size:60px;color:#f48fb1;opacity:.3;position:absolute;top:-10px;left:10px;font-family:Georgia,serif}
.letter-text{font-size:13.5px;line-height:1.8;color:#5d4037;font-family:'Georgia',serif;font-style:italic;text-align:center}
.letter-sig{font-size:17px;color:#e91e8c;font-weight:900;margin-top:12px;text-align:right;font-family:'Georgia',serif}
.btn-next-warm{background:linear-gradient(135deg,#ff8f00,#e91e8c);color:#fff;border:none;padding:11px 32px;border-radius:50px;font-size:14px;font-weight:800;cursor:pointer;box-shadow:0 4px 16px rgba(233,30,140,.3);margin-top:8px;display:inline-flex;align-items:center;gap:8px}

/* ====== SURPRISE ====== */
#s-surprise{background:linear-gradient(170deg,#f8c8ff,#f0a0f0);min-height:340px}
.surprise-title{font-size:26px;font-weight:900;color:#9c27b0;text-align:center;line-height:1.3;font-style:italic;margin-bottom:10px}
.couple-img{width:210px;height:auto;animation:coupleFloat 2s ease-in-out infinite}
@keyframes coupleFloat{0%,100%{transform:translateY(0)}50%{transform:translateY(-5px)}}
.surprise-btns{display:flex;gap:30px;margin-top:20px;position:relative;width:290px;justify-content:space-between}
.btn-yes{background:#e91e8c;color:#fff;border:3px solid #880e4f;padding:12px 38px;border-radius:50px;font-size:18px;font-weight:900;cursor:pointer;font-family:'Arial Black',sans-serif;box-shadow:0 3px 12px rgba(233,30,140,.4)}
.btn-no{background:#e91e8c;color:#fff;border:3px solid #880e4f;padding:12px 38px;border-radius:50px;font-size:18px;font-weight:900;cursor:pointer;font-family:'Arial Black',sans-serif;box-shadow:0 3px 12px rgba(233,30,140,.4)}

/* ====== GIFTS ====== */
#s-gifts{background:#d6e8f8;min-height:360px}
.gifts-title{font-size:24px;font-weight:900;color:#222;letter-spacing:1px;margin-bottom:18px;font-family:'Arial Black',sans-serif}
.gifts-grid{display:grid;grid-template-columns:1fr 1fr;gap:16px;width:100%;max-width:280px}
.gift-box{cursor:pointer;transition:transform .2s;display:flex;align-items:center;justify-content:center}
.gift-box:hover{transform:scale(1.08)}
.gift-inner{width:112px;height:112px;background:#f5f5f5;border-radius:8px;border:2px solid #ddd;display:flex;flex-direction:column;align-items:center;justify-content:flex-end;padding-bottom:10px;position:relative;box-shadow:2px 2px 8px rgba(0,0,0,.12);overflow:visible}
.gift-bow{font-size:28px;position:absolute;top:-18px;z-index:2}
.gift-inner::before{content:'';position:absolute;top:0;left:50%;transform:translateX(-50%);width:4px;height:100%;background:#b39ddb;border-radius:2px;z-index:1}
.gift-inner::after{content:'';position:absolute;top:50%;left:0;transform:translateY(-50%);width:100%;height:4px;background:#b39ddb;border-radius:2px;z-index:1}
.gift-face{font-size:42px;position:relative;z-index:2;margin-top:8px}
.gifts-hint{font-size:13px;font-weight:700;color:#333;margin-top:18px;font-family:'Arial Black',sans-serif;display:flex;align-items:center;gap:6px}

/* ====== REASONS ====== */
#s-reasons{background:linear-gradient(160deg,#fce4ec,#f8bbd0);min-height:420px;padding:20px}
.reasons-title{font-size:20px;font-weight:900;color:#880e4f;font-family:'Arial Black',sans-serif;margin-bottom:14px;text-align:center;display:flex;align-items:center;justify-content:center;gap:8px}
.reason-card{background:#fff;border-radius:16px;padding:12px 16px;width:100%;max-width:300px;margin:5px 0;box-shadow:0 3px 12px rgba(233,30,140,.15);display:flex;align-items:center;gap:12px;animation:bounceIn .5s ease both;cursor:default;transition:transform .2s}
.reason-card:hover{transform:scale(1.02)}
@keyframes bounceIn{from{transform:scale(.7);opacity:0}to{transform:scale(1);opacity:1}}
.reason-num{width:32px;height:32px;background:linear-gradient(135deg,#e91e8c,#f48fb1);border-radius:50%;display:flex;align-items:center;justify-content:center;color:#fff;font-weight:900;font-size:13px;flex-shrink:0}
.reason-text{font-size:12.5px;color:#5d4037;line-height:1.4;font-style:italic;flex:1}
.reason-emoji{font-size:20px;flex-shrink:0}

/* ====== MUSIC PLAYER ====== */
#s-music{background:linear-gradient(160deg,#0d0d0d,#1a0a2e,#0d0d0d);min-height:420px;padding:16px 20px}
.music-album{width:130px;height:130px;border-radius:16px;object-fit:cover;box-shadow:0 8px 32px rgba(0,0,0,.6);transition:all .4s ease;flex-shrink:0}
.music-album.spinning{border-radius:50%;animation:spinAlbum 4s linear infinite;box-shadow:0 0 30px rgba(233,30,140,.5)}
@keyframes spinAlbum{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}
.music-now-playing{display:flex;align-items:center;gap:14px;width:100%;max-width:340px;margin-bottom:12px;background:rgba(255,255,255,.05);border-radius:16px;padding:12px}
.music-info{flex:1;min-width:0}
.music-title{color:#fff;font-size:15px;font-weight:900;font-family:'Arial Black',sans-serif;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.music-artist{color:#f48fb1;font-size:12px;margin-top:3px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.music-bars{display:flex;gap:3px;align-items:flex-end;height:28px;flex-shrink:0}
.music-bar{width:4px;background:linear-gradient(180deg,#e91e8c,#f48fb1);border-radius:2px;animation:musicBounce .6s ease-in-out infinite}
.music-bar.paused{animation:none;height:4px}
@keyframes musicBounce{0%,100%{height:5px}50%{height:26px}}
.music-progress-wrap{width:100%;max-width:340px;margin-bottom:8px}
.music-progress-bar{width:100%;height:4px;background:rgba(255,255,255,.15);border-radius:2px;cursor:pointer;position:relative}
.music-progress-fill{height:100%;background:linear-gradient(90deg,#e91e8c,#f48fb1);border-radius:2px;width:0%;transition:width .2s}
.music-time{display:flex;justify-content:space-between;font-size:10px;color:rgba(255,255,255,.4);margin-top:4px}
.music-controls-row{display:flex;align-items:center;gap:16px;margin-bottom:14px}
.ctrl-btn{background:none;border:none;color:rgba(255,255,255,.6);font-size:18px;cursor:pointer;padding:6px;transition:color .2s;display:flex;align-items:center}
.ctrl-btn:hover{color:#fff}
.ctrl-btn.play-pause{background:#e91e8c;border-radius:50%;width:52px;height:52px;font-size:20px;color:#fff;justify-content:center;box-shadow:0 4px 16px rgba(233,30,140,.5);transition:transform .1s}
.ctrl-btn.play-pause:active{transform:scale(.93)}
.ctrl-btn.active{color:#e91e8c}
.volume-row{display:flex;align-items:center;gap:8px;width:100%;max-width:340px;margin-bottom:14px}
.volume-row i{color:rgba(255,255,255,.5);font-size:14px}
.volume-slider{flex:1;accent-color:#e91e8c;height:4px;cursor:pointer}
.song-list{width:100%;max-width:340px;display:flex;flex-direction:column;gap:6px}
.song-item{background:rgba(255,255,255,.06);border-radius:12px;padding:10px 12px;display:flex;align-items:center;gap:10px;cursor:pointer;transition:background .2s;border:1px solid transparent}
.song-item:hover{background:rgba(255,255,255,.1)}
.song-item.active{background:rgba(233,30,140,.2);border-color:rgba(233,30,140,.4)}
.song-cover{width:42px;height:42px;border-radius:8px;object-fit:cover;flex-shrink:0}
.song-meta{flex:1;min-width:0}
.song-name{font-size:12px;font-weight:700;color:#fff;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.song-by{font-size:10px;color:rgba(255,255,255,.45);margin-top:2px}
.song-dur{font-size:10px;color:rgba(255,255,255,.35);flex-shrink:0}
.song-play-icon{font-size:12px;color:#e91e8c;flex-shrink:0;width:14px}

/* ====== CAMERA 1 ====== */
#s-camera{background:#f9b0e8;min-height:340px;padding:14px;justify-content:space-between}
.camera-scene{width:100%;display:flex;align-items:center;justify-content:center;position:relative;height:255px}
.camera-body{width:175px;height:152px;background:linear-gradient(135deg,#bbb,#888);border-radius:14px;position:relative;box-shadow:4px 4px 16px rgba(0,0,0,.35);display:flex;align-items:center;justify-content:center;z-index:2}
.camera-screen{width:124px;height:94px;background:#1a1a2e;border-radius:6px;overflow:hidden;border:2px solid #555;display:flex;align-items:center;justify-content:center;font-size:44px}
.camera-screen img{width:100%;height:100%;object-fit:cover}
.polaroid{position:absolute;background:#fff;padding:6px 6px 20px;box-shadow:2px 4px 12px rgba(0,0,0,.2);border-radius:3px}
.pol1{top:5px;right:5px;transform:rotate(8deg);z-index:3}.pol2{bottom:20px;left:0;transform:rotate(-10deg);z-index:1}
.pol-inner{width:78px;height:68px;display:flex;align-items:center;justify-content:center;overflow:hidden;font-size:30px}
.pol-inner img{width:100%;height:100%;object-fit:cover}
.cam-label{font-size:9px;color:#555;position:absolute;top:8px;left:10px}
.cherry{position:absolute;font-size:28px;left:8px;top:25px}
.cd-icon{position:absolute;right:12px;bottom:18px;font-size:44px}
.red-heart{position:absolute;top:10px;left:35px;font-size:28px}
.btn-next-r{align-self:flex-end;background:#4A7BF7;color:#fff;border:none;padding:9px 24px;border-radius:50px;font-size:14px;font-weight:800;cursor:pointer;margin-top:8px;display:inline-flex;align-items:center;gap:7px}

/* ====== BUNNY ====== */
#s-bunny{background:linear-gradient(160deg,#f8c0ec,#f0a0e0);min-height:340px}
.bunny-img{width:210px;height:auto;animation:bunnyBounce 1.8s ease-in-out infinite}
@keyframes bunnyBounce{0%,100%{transform:translateY(0) rotate(0deg)}50%{transform:translateY(-10px) rotate(-2deg)}}

/* ====== QUIZ ====== */
#s-quiz{background:linear-gradient(160deg,#e8f5e9,#c8e6c9);min-height:420px;padding:20px}
.quiz-title{font-size:20px;font-weight:900;color:#1b5e20;font-family:'Arial Black',sans-serif;margin-bottom:4px;text-align:center;display:flex;align-items:center;justify-content:center;gap:8px}
.quiz-progress{font-size:12px;color:#388e3c;margin-bottom:14px;display:flex;align-items:center;gap:5px}
.quiz-q{font-size:15px;font-weight:700;color:#2e7d32;text-align:center;margin-bottom:18px;line-height:1.5;max-width:290px}
.quiz-options{display:flex;flex-direction:column;gap:9px;width:100%;max-width:290px}
.quiz-opt{background:#fff;border:2px solid #a5d6a7;border-radius:50px;padding:11px 20px;text-align:center;font-size:13px;font-weight:700;color:#2e7d32;cursor:pointer;transition:all .2s}
.quiz-opt:hover{background:#a5d6a7;transform:scale(1.02)}
.quiz-opt.correct{background:#4caf50;color:#fff;border-color:#4caf50}
.quiz-opt.wrong{background:#ef5350;color:#fff;border-color:#ef5350}

/* ====== COMPLIMENTS ====== */
#s-compliments{background:linear-gradient(160deg,#fce4ec,#f3e5f5,#e8eaf6);min-height:400px}
.comp-title{font-size:20px;font-weight:900;color:#880e4f;font-family:'Arial Black',sans-serif;margin-bottom:6px;text-align:center;display:flex;align-items:center;justify-content:center;gap:8px}
.comp-machine{background:#fff;border-radius:24px;padding:22px;max-width:300px;width:100%;text-align:center;box-shadow:0 8px 32px rgba(233,30,140,.15);margin:10px 0 14px}
.comp-heart{font-size:48px;animation:heartbeat 1.2s ease-in-out infinite;display:block}
@keyframes heartbeat{0%,100%{transform:scale(1)}15%{transform:scale(1.25)}30%{transform:scale(1)}}
.comp-text{font-size:17px;font-weight:700;color:#c2185b;line-height:1.4;margin:12px 0;min-height:58px;display:flex;align-items:center;justify-content:center;font-style:italic}
.btn-compliment{background:linear-gradient(135deg,#e91e8c,#9c27b0);color:#fff;border:none;padding:12px 28px;border-radius:50px;font-size:14px;font-weight:800;cursor:pointer;box-shadow:0 4px 16px rgba(233,30,140,.4);display:inline-flex;align-items:center;gap:8px}
.comp-counter{font-size:11px;color:rgba(136,14,91,.55);margin-top:6px;display:flex;align-items:center;gap:4px;justify-content:center}

/* ====== TIMELINE ====== */
#s-timeline{background:linear-gradient(180deg,#1a1a2e,#16213e,#0f3460);min-height:440px;padding:20px 16px}
.timeline-title{color:#f48fb1;font-size:21px;font-weight:900;font-family:'Arial Black',sans-serif;margin-bottom:16px;text-align:center;display:flex;align-items:center;justify-content:center;gap:8px}
.timeline{width:100%;max-width:340px;position:relative}
.timeline::before{content:'';position:absolute;left:20px;top:0;bottom:0;width:2px;background:linear-gradient(180deg,#e91e8c,#f48fb1,#e91e8c)}
.tl-item{display:flex;align-items:flex-start;gap:14px;margin-bottom:16px;animation:slideInLeft .5s ease both}
@keyframes slideInLeft{from{opacity:0;transform:translateX(-20px)}to{opacity:1;transform:translateX(0)}}
.tl-dot{width:12px;height:12px;background:#e91e8c;border-radius:50%;flex-shrink:0;margin-top:4px;margin-left:15px;box-shadow:0 0 8px #e91e8c}
.tl-content{flex:1}
.tl-year{font-size:10px;color:#f48fb1;font-weight:700;letter-spacing:1px}
.tl-text{font-size:13px;color:rgba(255,255,255,.88);line-height:1.5;margin-top:2px}

/* ====== COUNTDOWN ====== */
#s-countdown{background:radial-gradient(ellipse at center,#1a0a2e 0%,#000 100%);min-height:420px}
.countdown-title{color:#f48fb1;font-size:17px;font-weight:900;font-family:'Arial Black',sans-serif;text-align:center;margin-bottom:6px;display:flex;align-items:center;justify-content:center;gap:8px}
.countdown-sub{color:rgba(255,255,255,.55);font-size:13px;text-align:center;margin-bottom:22px}
.countdown-grid{display:flex;gap:10px;margin-bottom:22px}
.cd-box{background:rgba(255,255,255,.07);border:1px solid rgba(233,30,140,.3);border-radius:14px;padding:14px 10px;text-align:center;min-width:62px}
.cd-num{font-size:34px;font-weight:900;color:#fff;font-family:'Arial Black',sans-serif;line-height:1;text-shadow:0 0 20px rgba(233,30,140,.6)}
.cd-label{font-size:9px;color:#f48fb1;margin-top:4px;font-weight:700;letter-spacing:1px}
.confetti-canvas{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none}

/* ====== GALLERY ====== */
#s-gallery{background:linear-gradient(160deg,#1c1c2e,#2d1b69);min-height:420px;padding:18px}
.gallery-title{color:#fff;font-size:19px;font-weight:900;font-family:'Arial Black',sans-serif;margin-bottom:14px;text-align:center;display:flex;align-items:center;justify-content:center;gap:8px}
.gallery-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:6px;width:100%;max-width:320px}
.gallery-item{aspect-ratio:1;border-radius:10px;overflow:hidden;cursor:pointer;position:relative;transition:transform .2s;box-shadow:0 2px 8px rgba(0,0,0,.3);display:flex;align-items:center;justify-content:center;font-size:30px}
.gallery-item:hover{transform:scale(1.06);z-index:2}
.g-overlay{position:absolute;bottom:0;left:0;right:0;background:linear-gradient(transparent,rgba(0,0,0,.6));padding:4px;font-size:8px;color:#fff;text-align:center;opacity:0;transition:opacity .2s}
.gallery-item:hover .g-overlay{opacity:1}
.gallery-lightbox{display:none;position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.92);z-index:200;align-items:center;justify-content:center;flex-direction:column}
.gallery-lightbox.show{display:flex}
.lb-emoji{font-size:90px}
.lb-caption{color:#fff;font-size:15px;margin-top:12px;text-align:center;font-family:Georgia,serif;font-style:italic}
.lb-close{position:absolute;top:18px;right:22px;color:#fff;font-size:26px;cursor:pointer}

/* ====== CAKE ====== */
#s-cake{background:#000;min-height:380px;flex-direction:row;align-items:center;justify-content:center;gap:20px;padding:28px 18px;flex-wrap:wrap}
.cake-text-col{flex:1;min-width:155px;color:#fff}
.cake-msg{font-size:17px;line-height:1.7;margin-bottom:10px;font-family:'Courier New',monospace;white-space:pre-line}
.cake-blow-txt{font-size:14px;font-weight:900;font-family:'Arial Black',sans-serif}
.cake-col{display:flex;flex-direction:column;align-items:center;gap:12px}
.cake-img-el{width:140px;height:auto;transition:all .5s}
.btn-blow{background:#fff;color:#000;border:2px solid #999;padding:8px 20px;font-size:15px;font-weight:900;cursor:pointer;font-family:'Arial Black',sans-serif;letter-spacing:1px;display:inline-flex;align-items:center;gap:7px}

/* ====== FINAL ====== */
#s-final{background:#000;min-height:380px;flex-direction:row;align-items:flex-start;justify-content:center;gap:14px;padding:28px 14px;flex-wrap:wrap}
.final-text-col{flex:1;min-width:155px;color:#fff}
.final-hearts{font-size:20px;margin-bottom:10px}
.final-msg{font-size:12.5px;line-height:1.8;color:#fff;text-align:center}
.btn-back{background:#fff;color:#000;border:2px solid #999;padding:8px 20px;font-size:14px;font-weight:900;cursor:pointer;font-family:'Arial Black',sans-serif;display:inline-flex;align-items:center;gap:7px}

/* ====== CAMERA 2 ====== */
#s-camera2{background:linear-gradient(170deg,#3d1c00,#7b3a00 40%,#b05e20 70%,#8B4513);min-height:340px;padding:14px;justify-content:space-between}
.cam2-scene{width:100%;position:relative;height:255px;display:flex;align-items:center;justify-content:center}
.cam2-body{width:162px;height:145px;background:#1c1c1c;border-radius:10px;box-shadow:4px 4px 20px rgba(0,0,0,.7);display:flex;align-items:center;justify-content:center;position:relative;z-index:2;border:2px solid #444;margin-top:40px}
.cam2-screen{width:106px;height:82px;background:#000;border-radius:4px;border:2px solid #333;display:flex;align-items:center;justify-content:center;overflow:hidden;font-size:34px}
.cam2-screen img{width:100%;height:100%;object-fit:cover}
.film-strip{position:absolute;top:6px;left:-22px;right:-22px;display:flex;gap:2px;background:#111;padding:4px;border-radius:4px;z-index:3;transform:rotate(-5deg)}
.film-frame{width:48px;height:40px;background:#222;border:1px solid #444;border-radius:2px;display:flex;align-items:center;justify-content:center;overflow:hidden;font-size:18px}
.film-frame img{width:100%;height:100%;object-fit:cover}
.love-card{position:absolute;right:-5px;top:55px;background:#fff8e1;padding:8px 10px;border-radius:4px;text-align:center;width:85px;box-shadow:2px 2px 8px rgba(0,0,0,.4);z-index:4;transform:rotate(3deg);font-family:'Georgia',serif}
.love-title{font-size:11px;font-weight:900;color:#8B0000;line-height:1.2;font-style:italic}
.love-sub{font-size:8px;color:#666;margin-top:2px}
.polaroid2{position:absolute;background:#fff;padding:5px 5px 15px;box-shadow:2px 4px 12px rgba(0,0,0,.4);border-radius:2px}
.pol2a{bottom:5px;left:-5px;transform:rotate(-8deg);z-index:1}.pol2b{top:25px;left:-10px;transform:rotate(-12deg)}
.pol2-inner{width:55px;height:50px;display:flex;align-items:center;justify-content:center;overflow:hidden;font-size:26px}
.pol2-inner img{width:100%;height:100%;object-fit:cover}
.lily{position:absolute;font-size:36px;bottom:18px;right:8px;transform:rotate(20deg)}
.lily2{position:absolute;font-size:28px;top:110px;left:3px;transform:rotate(-20deg)}
.btn-next-r2{align-self:flex-end;background:#4A7BF7;color:#fff;border:none;padding:9px 24px;border-radius:50px;font-size:14px;font-weight:800;cursor:pointer;margin-top:8px;display:inline-flex;align-items:center;gap:7px}

/* SHARED BUTTONS */
.btn-next-gen{background:linear-gradient(135deg,#e91e8c,#f48fb1);color:#fff;border:none;padding:11px 32px;border-radius:50px;font-size:14px;font-weight:800;cursor:pointer;box-shadow:0 4px 16px rgba(233,30,140,.4);margin-top:12px;display:inline-flex;align-items:center;gap:8px}
.btn-next-dark{background:linear-gradient(135deg,#e91e8c,#9c27b0);color:#fff;border:none;padding:11px 32px;border-radius:50px;font-size:14px;font-weight:800;cursor:pointer;box-shadow:0 4px 16px rgba(233,30,140,.4);margin-top:10px;display:inline-flex;align-items:center;gap:8px}
</style>
</head>
<body>

<div class="progress-wrap"><div class="progress-fill" id="progress-fill" style="width:0%"></div></div>

<div class="main" id="main-container">

<!-- ===== INTRO ===== -->
<div id="s-intro" class="screen active">
  <canvas class="star-canvas" id="star-canvas"></canvas>
  <div class="intro-text">
    <div style="font-size:54px;margin-bottom:12px">üéÄ</div>
    <div class="intro-big">Happy Birthday!</div>
    <div class="intro-sub">Something special was made just for you ‚ú®</div>
    <button class="btn-start" onclick="go('s-ttt')">
      <i class="fa-solid fa-gift"></i> Open Your Surprise
    </button>
  </div>
</div>

<!-- ===== TTT ===== -->
<div id="s-ttt" class="screen">
  <div class="sparkle-deco" style="top:12px;left:22px">‚ú®</div>
  <div class="sparkle-deco" style="top:22px;right:28px;animation-delay:1.2s">‚≠ê</div>
  <div class="sparkle-deco" style="bottom:80px;left:16px;animation-delay:2.1s">üí´</div>
  <div class="sparkle-deco" style="bottom:60px;right:14px;animation-delay:.7s">‚ú®</div>
  <div class="ttt-title">Tic Tac Toe</div>
  <div class="ttt-turn" id="ttt-turn">Your turn! (X)</div>
  <div class="ttt-board">
    <div class="cell" onclick="move(0)"></div><div class="cell" onclick="move(1)"></div><div class="cell" onclick="move(2)"></div>
    <div class="cell" onclick="move(3)"></div><div class="cell" onclick="move(4)"></div><div class="cell" onclick="move(5)"></div>
    <div class="cell" onclick="move(6)"></div><div class="cell" onclick="move(7)"></div><div class="cell" onclick="move(8)"></div>
  </div>
  <div class="ttt-btns">
    <button class="btn-restart" onclick="restart()"><i class="fa-solid fa-rotate-right"></i> Restart</button>
    <button class="btn-next-pink" onclick="go('s-bday')"><i class="fa-solid fa-arrow-right"></i> next</button>
  </div>
  <div class="win-overlay" id="win-overlay">
    <div class="win-card">
      <div class="win-hearts">‚ù§Ô∏è ü©∑ ‚ù§Ô∏è</div>
      <div class="win-text">You won! ‚ù§Ô∏è</div>
      <button class="btn-win-next" onclick="go('s-bday')"><i class="fa-solid fa-arrow-right"></i> next</button>
    </div>
  </div>
</div>

<!-- ===== HAPPY BIRTHDAY ===== -->
<div id="s-bday" class="screen">
  <div class="float-heart" style="left:10%;font-size:18px;animation-duration:4s">üíï</div>
  <div class="float-heart" style="left:80%;font-size:14px;animation-duration:5s;animation-delay:1.5s">ü©∑</div>
  <div class="float-heart" style="left:50%;font-size:20px;animation-duration:3.5s;animation-delay:2.5s">‚ù§Ô∏è</div>
  <img class="bday-hb-img"
    src="https://stickershop.line-scdn.net/stickershop/v1/sticker/52002734/android/sticker.png"
    onerror="this.style.display='none';document.getElementById('bday-fallback').style.display='flex'"
    alt="Happy Birthday">
  <div id="bday-fallback" style="display:none;flex-direction:column;align-items:center;animation:bdayBounce 2s ease-in-out infinite">
    <div style="font-size:18px">üéä üéâ üéä</div>
    <div class="bday-happy-txt">HAPPY</div>
    <div class="bday-bday-txt">BIRTHDAY</div>
    <div style="display:flex;gap:4px;align-items:flex-end;margin:10px 0">
      <div style="text-align:center"><div style="font-size:54px;line-height:1">üêª</div><div style="font-size:18px">üéÅ</div></div>
      <div style="text-align:center;margin:0 4px"><div style="font-size:62px;line-height:1">üêª</div><div style="font-size:22px">üéÇ</div></div>
      <div style="text-align:center"><div style="font-size:54px;line-height:1">üê∞</div><div style="font-size:18px">üéÅ</div></div>
    </div>
  </div>
  <button class="btn-next-blue" onclick="go('s-letter')"><i class="fa-solid fa-arrow-right"></i> NEXT</button>
  <div class="footer-cv"><span><i class="fa-solid fa-code" style="margin-right:3px"></i>Designed by CodeWizard</span></div>
</div>

<!-- ===== LOVE LETTER ===== -->
<div id="s-letter" class="screen" style="background:linear-gradient(160deg,#fff8e1,#fff3e0)">
  <div style="font-size:19px;font-weight:900;color:#bf360c;font-family:'Arial Black',sans-serif;margin-bottom:8px;display:flex;align-items:center;gap:7px">
    <i class="fa-solid fa-envelope-open-text" style="color:#e91e8c"></i> A Letter For You
  </div>
  <div class="letter-envelope" id="letter-env" onclick="openLetter()">üíå</div>
  <div class="letter-paper" id="letter-paper" style="display:none">
    <div class="letter-text">
      "To my favorite person in the whole world ‚Äî<br><br>
      From the moment you walked into my life, every single day has been brighter. Your laugh is my favorite sound, your smile is my favorite sight, and your heart is my favorite place.<br><br>
      Today is YOUR day. You deserve every candle, every wish, every single celebration. I hope this birthday brings you as much joy as you bring to everyone around you.<br><br>
      Thank you for existing. Thank you for being YOU. üå∏"
    </div>
    <div class="letter-sig">‚Äî With all my love üíï</div>
  </div>
  <button id="letter-btn" class="btn-next-warm" onclick="openLetter()">
    <i class="fa-solid fa-envelope-open"></i> Open Letter
  </button>
</div>

<!-- ===== SURPRISE ===== -->
<div id="s-surprise" class="screen">
  <div style="position:absolute;top:55px;right:55px;font-size:22px;animation:coupleFloat 2s ease-in-out infinite">üíï<br>üíñ</div>
  <div class="surprise-title">Are you ready<br>for surprise?</div>
  <img class="couple-img"
    src="https://stickershop.line-scdn.net/stickershop/v1/sticker/52002737/android/sticker.png"
    onerror="this.onerror=null;this.src='https://cdn-icons-png.flaticon.com/512/4213/4213958.png';this.style.width='170px'"
    alt="Cute couple">
  <div class="surprise-btns" id="surprise-btns">
    <button class="btn-yes" onclick="go('s-gifts')">YES</button>
    <button class="btn-no" id="btn-no" onmouseenter="noRun(event)" ontouchstart="noRun(event)">NO</button>
  </div>
</div>

<!-- ===== GIFTS ===== -->
<div id="s-gifts" class="screen">
  <div class="gifts-title">GIFT FOR YOU</div>
  <div class="gifts-grid">
    <div class="gift-box" onclick="openGift(this)"><div class="gift-inner"><div class="gift-bow">üéÄ</div><div class="gift-face">üê∂</div></div></div>
    <div class="gift-box" onclick="openGift(this)"><div class="gift-inner"><div class="gift-bow">üéÄ</div><div class="gift-face">üê∂</div></div></div>
    <div class="gift-box" onclick="openGift(this)"><div class="gift-inner"><div class="gift-bow">üéÄ</div><div class="gift-face">üê∂</div></div></div>
    <div class="gift-box" onclick="openGift(this)"><div class="gift-inner"><div class="gift-bow">üéÄ</div><div class="gift-face">üê∂</div></div></div>
  </div>
  <div class="gifts-hint"><i class="fa-solid fa-hand-pointer" style="color:#5c6bc0"></i> Click any gift to open</div>
  <div class="footer-cv" style="margin-top:10px"><span><i class="fa-solid fa-code" style="margin-right:3px"></i>Designed by CodeWizard</span></div>
</div>

<!-- ===== REASONS ===== -->
<div id="s-reasons" class="screen">
  <div class="reasons-title"><i class="fa-solid fa-heart" style="color:#e91e8c"></i> Reasons You're Amazing</div>
  <div id="reasons-list" style="width:100%;max-width:310px;display:flex;flex-direction:column;gap:6px;overflow-y:auto;max-height:290px"></div>
  <button class="btn-next-gen" onclick="go('s-music')"><i class="fa-solid fa-arrow-right"></i> next</button>
</div>

<!-- ===== MUSIC PLAYER ===== -->
<div id="s-music" class="screen">
  <div class="music-now-playing" id="music-now-playing">
    <img class="music-album" id="music-album-art"
      src="https://upload.wikimedia.org/wikipedia/commons/thumb/f/f9/Happy_birthday.jpg/400px-Happy_birthday.jpg"
      onerror="this.src='https://placehold.co/130x130/1a0a2e/e91e8c?text=‚ô™'"
      alt="Album Art">
    <div class="music-info">
      <div class="music-title" id="music-title">Happy Birthday</div>
      <div class="music-artist" id="music-artist">Traditional üéÇ</div>
      <div class="music-bars" id="music-bars">
        <div class="music-bar paused" style="animation-delay:0s"></div>
        <div class="music-bar paused" style="animation-delay:.1s"></div>
        <div class="music-bar paused" style="animation-delay:.2s"></div>
        <div class="music-bar paused" style="animation-delay:.3s"></div>
        <div class="music-bar paused" style="animation-delay:.15s"></div>
      </div>
    </div>
  </div>

  <div class="music-progress-wrap">
    <div class="music-progress-bar" id="music-prog-bar" onclick="seekMusic(event)">
      <div class="music-progress-fill" id="music-prog-fill"></div>
    </div>
    <div class="music-time"><span id="music-cur">0:00</span><span id="music-dur">0:00</span></div>
  </div>

  <div class="music-controls-row">
    <button class="ctrl-btn" onclick="prevSong()" title="Previous"><i class="fa-solid fa-backward-step"></i></button>
    <button class="ctrl-btn" onclick="rewind10()" title="Rewind 10s"><i class="fa-solid fa-rotate-left"></i></button>
    <button class="ctrl-btn play-pause" id="play-pause-btn" onclick="togglePlay()"><i class="fa-solid fa-play" id="play-icon"></i></button>
    <button class="ctrl-btn" onclick="forward10()" title="Forward 10s"><i class="fa-solid fa-rotate-right"></i></button>
    <button class="ctrl-btn" onclick="nextSong()" title="Next"><i class="fa-solid fa-forward-step"></i></button>
  </div>

  <div class="volume-row">
    <i class="fa-solid fa-volume-low"></i>
    <input type="range" class="volume-slider" id="volume-slider" min="0" max="1" step="0.02" value="0.8" oninput="setVolume(this.value)">
    <i class="fa-solid fa-volume-high"></i>
  </div>

  <div class="song-list" id="song-list"></div>

  <button class="btn-next-gen" style="margin-top:12px" onclick="go('s-camera')"><i class="fa-solid fa-arrow-right"></i> next</button>
</div>

<!-- ===== CAMERA 1 ===== -->
<div id="s-camera" class="screen">
  <div class="camera-scene">
    <span class="red-heart">‚ù§Ô∏è</span>
    <span class="cherry">üçí</span>
    <div class="polaroid pol2">
      <div class="pol-inner" style="background:linear-gradient(135deg,#1a237e,#1565C0)">
        <img src="https://images.unsplash.com/photo-1531366936337-7c912a4589a7?w=200&h=150&fit=crop" onerror="this.style.display='none'" alt="">üåå
      </div>
    </div>
    <div class="camera-body">
      <div class="cam-label">DSC-W55</div>
      <div class="camera-screen">
        <img src="https://images.unsplash.com/photo-1531366936337-7c912a4589a7?w=300&h=200&fit=crop" onerror="this.style.display='none'" alt="">üåå
      </div>
    </div>
    <div class="polaroid pol1">
      <div class="pol-inner" style="background:linear-gradient(135deg,#e3f2fd,#90caf9)">
        <img src="https://images.unsplash.com/photo-1518895949257-7621c3c786d7?w=200&h=150&fit=crop" onerror="this.style.display='none'" alt="">üíë
      </div>
    </div>
    <span class="cd-icon">üíø</span>
  </div>
  <button class="btn-next-r" onclick="go('s-bunny')"><i class="fa-solid fa-arrow-right"></i> NEXT</button>
  <div class="footer-cv"><span><i class="fa-solid fa-code" style="margin-right:3px"></i>Designed by CodeWizard</span></div>
</div>

<!-- ===== BUNNY ===== -->
<div id="s-bunny" class="screen">
  <img class="bunny-img"
    src="https://stickershop.line-scdn.net/stickershop/v1/sticker/52002735/android/sticker.png"
    onerror="this.onerror=null;this.src='https://cdn-icons-png.flaticon.com/512/3069/3069172.png'"
    alt="Cute bunny">
  <button class="btn-next-r" style="margin-top:20px" onclick="go('s-quiz')"><i class="fa-solid fa-arrow-right"></i> NEXT</button>
  <div class="footer-cv" style="margin-top:8px"><span><i class="fa-solid fa-code" style="margin-right:3px"></i>Designed by CodeWizard</span></div>
</div>

<!-- ===== QUIZ ===== -->
<div id="s-quiz" class="screen">
  <div class="quiz-title"><i class="fa-solid fa-star" style="color:#2e7d32"></i> Birthday Quiz!</div>
  <div class="quiz-progress" id="quiz-prog"><i class="fa-solid fa-circle-question"></i> Question 1 of 5</div>
  <div class="quiz-q" id="quiz-q">Loading...</div>
  <div class="quiz-options" id="quiz-opts"></div>
</div>

<!-- ===== COMPLIMENTS ===== -->
<div id="s-compliments" class="screen">
  <div class="comp-title"><i class="fa-solid fa-wand-magic-sparkles"></i> Compliment Machine</div>
  <div class="comp-machine">
    <span class="comp-heart">üíù</span>
    <div class="comp-text" id="comp-text">Press the button for a compliment!</div>
  </div>
  <button class="btn-compliment" onclick="newCompliment()"><i class="fa-solid fa-heart"></i> Get Compliment</button>
  <div class="comp-counter" id="comp-counter"><i class="fa-solid fa-flower" style="color:#e91e8c"></i> You've received 0 compliments üå∏</div>
  <button class="btn-next-gen" onclick="go('s-timeline')"><i class="fa-solid fa-arrow-right"></i> next</button>
</div>

<!-- ===== TIMELINE ===== -->
<div id="s-timeline" class="screen">
  <div class="timeline-title"><i class="fa-solid fa-timeline"></i> Birthday Memories</div>
  <div class="timeline">
    <div class="tl-item" style="animation-delay:.1s"><div class="tl-dot"></div><div class="tl-content"><div class="tl-year">THE DAY YOU WERE BORN</div><div class="tl-text">The world became a better place. A star was born ‚ú®</div></div></div>
    <div class="tl-item" style="animation-delay:.2s"><div class="tl-dot"></div><div class="tl-content"><div class="tl-year">EVERY BIRTHDAY SINCE</div><div class="tl-text">You've grown more incredible with every single year üå∏</div></div></div>
    <div class="tl-item" style="animation-delay:.3s"><div class="tl-dot"></div><div class="tl-content"><div class="tl-year">THE DAY WE MET</div><div class="tl-text">Life got so much brighter from that moment on üíï</div></div></div>
    <div class="tl-item" style="animation-delay:.4s"><div class="tl-dot"></div><div class="tl-content"><div class="tl-year">TODAY ‚Äî YOUR BIRTHDAY üéÇ</div><div class="tl-text">Another year of you being absolutely amazing! üéâ</div></div></div>
    <div class="tl-item" style="animation-delay:.5s"><div class="tl-dot"></div><div class="tl-content"><div class="tl-year">EVERY FUTURE BIRTHDAY</div><div class="tl-text">More adventures, more laughter, more love ahead üöÄ</div></div></div>
  </div>
  <button class="btn-next-dark" onclick="go('s-countdown')"><i class="fa-solid fa-arrow-right"></i> next</button>
</div>

<!-- ===== COUNTDOWN ===== -->
<div id="s-countdown" class="screen">
  <canvas class="confetti-canvas" id="confetti-canvas"></canvas>
  <div class="countdown-title"><i class="fa-solid fa-champagne-glasses"></i> Countdown to Your Next Birthday!</div>
  <div class="countdown-sub">Until you're even more fabulous üåü</div>
  <div class="countdown-grid">
    <div class="cd-box"><div class="cd-num" id="cd-days">---</div><div class="cd-label">DAYS</div></div>
    <div class="cd-box"><div class="cd-num" id="cd-hrs">--</div><div class="cd-label">HRS</div></div>
    <div class="cd-box"><div class="cd-num" id="cd-mins">--</div><div class="cd-label">MINS</div></div>
    <div class="cd-box"><div class="cd-num" id="cd-secs">--</div><div class="cd-label">SECS</div></div>
  </div>
  <div style="font-size:13px;color:rgba(255,255,255,.65);text-align:center;max-width:280px;line-height:1.6;margin-bottom:12px">Every second is a chance to do something amazing. And you always do üíñ</div>
  <button class="btn-next-gen" onclick="go('s-gallery')"><i class="fa-solid fa-arrow-right"></i> next</button>
</div>

<!-- ===== GALLERY ===== -->
<div id="s-gallery" class="screen">
  <div class="gallery-title"><i class="fa-solid fa-images"></i> Memory Gallery</div>
  <div class="gallery-grid" id="gallery-grid"></div>
  <div class="gallery-lightbox" id="gallery-lb">
    <div class="lb-close" onclick="closeLb()"><i class="fa-solid fa-xmark"></i></div>
    <div id="lb-content" style="font-size:90px"></div>
    <div class="lb-caption" id="lb-caption"></div>
  </div>
  <button class="btn-next-gen" onclick="go('s-cake')"><i class="fa-solid fa-arrow-right"></i> next</button>
</div>

<!-- ===== CAKE ===== -->
<div id="s-cake" class="screen">
  <div class="cake-text-col">
    <div class="cake-msg">Here's your
virtual cake
it's calorie-free
but full of love.</div>
    <div class="cake-blow-txt">Blow your candle and<br>make your wish</div>
  </div>
  <div class="cake-col">
    <img id="cake-img" class="cake-img-el"
      src="https://em-content.zobj.net/source/apple/354/birthday-cake_1f382.png"
      onerror="this.onerror=null;this.src='https://twemoji.maxcdn.com/v/latest/svg/1f382.svg'"
      alt="Birthday cake">
    <button class="btn-blow" id="btn-blow" onclick="blowCake()"><i class="fa-solid fa-wind"></i> BLOW</button>
  </div>
</div>

<!-- ===== FINAL ===== -->
<div id="s-final" class="screen">
  <canvas class="confetti-canvas" id="confetti-canvas2"></canvas>
  <div class="final-text-col">
    <div class="final-hearts">üíõ &nbsp; üíõ &nbsp; üíõ</div>
    <div class="final-msg">Happy Birthday to the most wonderful person I know! You've filled my life with so much love and joy, and I'm so thankful for every moment we've shared together. You're not just my boyfriend, but my best friend, my confidant, and my everything. I hope this year brings you all the success and happiness you deserve. I love you more than words can say, and I'm so grateful to have you in my life. Here's to many more birthdays together!</div>
  </div>
  <div style="display:flex;flex-direction:column;align-items:center;gap:12px;position:relative;z-index:2">
    <img style="width:130px;height:auto"
      src="https://em-content.zobj.net/source/apple/354/shortcake_1f370.png"
      onerror="this.onerror=null;this.src='https://twemoji.maxcdn.com/v/latest/svg/1f370.svg'"
      alt="Cake">
    <button class="btn-back" onclick="go('s-cake')"><i class="fa-solid fa-arrow-left"></i> BACK</button>
    <button class="btn-win-next" style="margin-top:4px" onclick="go('s-camera2')"><i class="fa-solid fa-heart"></i> See more</button>
  </div>
</div>

<!-- ===== CAMERA 2 ===== -->
<div id="s-camera2" class="screen">
  <div class="cam2-scene">
    <div class="film-strip">
      <div class="film-frame"><img src="https://images.unsplash.com/photo-1531366936337-7c912a4589a7?w=80&h=60&fit=crop" onerror="this.style.display='none';this.parentElement.innerHTML='üåå'" alt=""></div>
      <div class="film-frame"><img src="https://images.unsplash.com/photo-1531366936337-7c912a4589a7?w=80&h=60&fit=crop" onerror="this.style.display='none';this.parentElement.innerHTML='üåÉ'" alt=""></div>
      <div class="film-frame"><img src="https://images.unsplash.com/photo-1518895949257-7621c3c786d7?w=80&h=60&fit=crop" onerror="this.style.display='none';this.parentElement.innerHTML='üíë'" alt=""></div>
      <div class="film-frame"><img src="https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=80&h=60&fit=crop" onerror="this.style.display='none';this.parentElement.innerHTML='üåÖ'" alt=""></div>
    </div>
    <div class="polaroid2 pol2b"><div class="pol2-inner" style="background:#fce4ec"><img src="https://images.unsplash.com/photo-1518895949257-7621c3c786d7?w=100&h=90&fit=crop" onerror="this.style.display='none';this.parentElement.innerHTML='üíÖ'" alt=""></div></div>
    <div class="cam2-body">
      <div class="cam2-screen"><img src="https://images.unsplash.com/photo-1518895949257-7621c3c786d7?w=200&h=160&fit=crop" onerror="this.style.display='none';this.parentElement.innerHTML='üíÉ'" alt=""></div>
    </div>
    <div class="love-card"><div class="love-title">Love You<br>So Much</div><div class="love-sub">A mindful moment</div><div style="font-size:10px;margin-top:2px">üåπ</div></div>
    <span class="lily">üå∏</span><span class="lily2">üå∏</span>
    <div class="polaroid2 pol2a"><div class="pol2-inner" style="background:#e8f5e9"><img src="https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=100&h=90&fit=crop" onerror="this.style.display='none';this.parentElement.innerHTML='üåø'" alt=""></div></div>
  </div>
  <button class="btn-next-r2" onclick="go('s-intro')"><i class="fa-solid fa-rotate"></i> Start Over</button>
  <div class="footer-cv footer-cv-w"><span><i class="fa-solid fa-code" style="margin-right:3px"></i>Designed by CodeWizard</span></div>
</div>

</div><!-- end .main -->
<div class="screen-counter" id="screen-counter"></div>
<div class="bottom-bar"></div>

<script>
// ===== SCREEN MANAGEMENT =====
const SCREENS=['s-intro','s-ttt','s-bday','s-letter','s-surprise','s-gifts','s-reasons','s-music','s-camera','s-bunny','s-quiz','s-compliments','s-timeline','s-countdown','s-gallery','s-cake','s-final','s-camera2'];
let currentIdx=0;
function go(id){
  document.querySelectorAll('.screen').forEach(s=>s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  currentIdx=SCREENS.indexOf(id);
  if(currentIdx<0)currentIdx=0;
  const pct=(currentIdx/(SCREENS.length-1))*100;
  document.getElementById('progress-fill').style.width=pct+'%';
  document.getElementById('screen-counter').textContent=currentIdx>0?currentIdx+' / '+(SCREENS.length-1):'';
  if(id==='s-surprise')resetNo();
  if(id==='s-ttt')restart();
  if(id==='s-countdown')startCountdown();
  if(id==='s-reasons')buildReasons();
  if(id==='s-gallery')buildGallery();
  if(id==='s-quiz')startQuiz();
  if(id==='s-final')launchConfetti('confetti-canvas2');
  if(id==='s-intro')initStars();
  if(id==='s-music')buildSongList();
  if(id!=='s-cake')blown=false;
  // Pause music when leaving music screen
  if(id!=='s-music'&&audio&&!audio.paused){audio.pause();updatePlayBtn(false);}
}

// ===== SHOOTING STARS =====
function initStars(){
  const canvas=document.getElementById('star-canvas');
  if(!canvas)return;
  canvas.width=canvas.offsetWidth||320;canvas.height=canvas.offsetHeight||360;
  const ctx=canvas.getContext('2d');
  const stars=Array.from({length:80},()=>({x:Math.random()*canvas.width,y:Math.random()*canvas.height,r:Math.random()*1.5+.5,o:Math.random()}));
  const sh=[];
  let shTimer;
  function addSh(){sh.push({x:Math.random()*canvas.width,y:0,vx:2+Math.random()*3,vy:2+Math.random()*3,len:60+Math.random()*80,life:1});shTimer=setTimeout(addSh,1200+Math.random()*2000);}
  addSh();
  function draw(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    stars.forEach(s=>{ctx.beginPath();ctx.arc(s.x,s.y,s.r,0,Math.PI*2);ctx.fillStyle=`rgba(255,255,255,${s.o})`;ctx.fill();s.o+=.02*(Math.random()-.5);s.o=Math.max(.1,Math.min(1,s.o));});
    for(let i=sh.length-1;i>=0;i--){const s=sh[i];const g=ctx.createLinearGradient(s.x,s.y,s.x-s.vx*s.len/3,s.y-s.vy*s.len/3);g.addColorStop(0,'rgba(255,200,230,'+s.life+')');g.addColorStop(1,'rgba(255,200,230,0)');ctx.beginPath();ctx.moveTo(s.x,s.y);ctx.lineTo(s.x-s.vx*s.len/3,s.y-s.vy*s.len/3);ctx.strokeStyle=g;ctx.lineWidth=2;ctx.stroke();s.x+=s.vx;s.y+=s.vy;s.life-=.015;if(s.life<=0||s.x>canvas.width||s.y>canvas.height)sh.splice(i,1);}
    requestAnimationFrame(draw);
  }
  draw();
}
initStars();

// ===== TIC TAC TOE =====
let board=Array(9).fill(''),cur='X',over=false;
const WINS=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];
function move(i){if(board[i]||over)return;board[i]=cur;const cells=document.querySelectorAll('.cell');cells[i].textContent=cur;cells[i].classList.add('taken',cur.toLowerCase());const w=checkWin();if(w){over=true;w.forEach(idx=>cells[idx].classList.add('win-cell'));document.getElementById('ttt-turn').textContent=cur+' wins! üéâ';setTimeout(()=>document.getElementById('win-overlay').classList.add('show'),300);return;}if(board.every(c=>c)){over=true;document.getElementById('ttt-turn').textContent='Draw! ü§ù';return;}cur=cur==='X'?'O':'X';document.getElementById('ttt-turn').textContent=cur==='O'?'ü§î Thinking...':'Your turn! (X)';if(cur==='O')setTimeout(ai,600);}
function ai(){const empty=board.map((v,i)=>v===''?i:-1).filter(i=>i>=0);if(!empty.length||over)return;let pick=null;for(let idx of empty){board[idx]='O';if(checkWin()){pick=idx;board[idx]='';break;}board[idx]='';}if(pick===null)for(let idx of empty){board[idx]='X';if(checkWin()){pick=idx;board[idx]='';break;}board[idx]='';}if(pick===null)pick=empty.includes(4)?4:empty[Math.floor(Math.random()*empty.length)];move(pick);}
function checkWin(){for(let[a,b,c]of WINS)if(board[a]&&board[a]===board[b]&&board[b]===board[c])return[a,b,c];return null;}
function restart(){board=Array(9).fill('');cur='X';over=false;document.getElementById('win-overlay').classList.remove('show');document.querySelectorAll('.cell').forEach(c=>{c.textContent='';c.className='cell';});document.getElementById('ttt-turn').textContent='Your turn! (X)';}

// ===== LOVE LETTER =====
function openLetter(){
  const env=document.getElementById('letter-env'),paper=document.getElementById('letter-paper'),btn=document.getElementById('letter-btn');
  if(paper.style.display==='none'){env.style.display='none';paper.style.display='block';btn.innerHTML='<i class="fa-solid fa-arrow-right"></i> Next';btn.onclick=()=>go('s-surprise');}
  else go('s-surprise');
}

// ===== NO BUTTON =====
let noCount=0;
function resetNo(){noCount=0;const b=document.getElementById('btn-no');b.style.cssText='';}
function noRun(e){if(e)e.preventDefault();noCount++;if(noCount>8){document.getElementById('btn-no').style.display='none';return;}const btn=document.getElementById('btn-no');if(btn.style.position!=='fixed'){const r=btn.getBoundingClientRect();btn.style.position='fixed';btn.style.left=r.left+'px';btn.style.top=r.top+'px';btn.style.margin='0';btn.style.zIndex='9999';}const cx=parseFloat(btn.style.left)||window.innerWidth/2,cy=parseFloat(btn.style.top)||window.innerHeight/2;const angle=Math.random()*Math.PI*2,dist=80+Math.random()*110;let nx=cx+Math.cos(angle)*dist,ny=cy+Math.sin(angle)*dist;nx=Math.max(10,Math.min(window.innerWidth-130,nx));ny=Math.max(10,Math.min(window.innerHeight-60,ny));btn.style.transition='left .12s ease,top .12s ease';btn.style.left=nx+'px';btn.style.top=ny+'px';}

// ===== GIFTS =====
function openGift(el){el.innerHTML='<div style="font-size:48px;animation:pop .4s cubic-bezier(.34,1.56,.64,1)">üéÅ‚ú®</div>';setTimeout(()=>go('s-reasons'),700);}

// ===== REASONS =====
const reasons=[
  {n:1,text:'Your smile lights up every room you walk into',e:'üòä'},
  {n:2,text:'You have the biggest and most loving heart',e:'üíñ'},
  {n:3,text:'Your laugh is literally the best sound ever',e:'üòÇ'},
  {n:4,text:'You always know how to make people feel special',e:'üåü'},
  {n:5,text:"You're incredibly strong even when things are hard",e:'üí™'},
  {n:6,text:'You make every ordinary moment feel magical',e:'‚ú®'},
  {n:7,text:'Your kindness genuinely inspires everyone around you',e:'üå∏'},
  {n:8,text:"You're so fun to be around ‚Äî never a dull moment!",e:'üéâ'},
  {n:9,text:'You deserve all the good things coming your way',e:'üåà'},
  {n:10,text:'Simply put ‚Äî the world is better with you in it',e:'üåç'},
];
function buildReasons(){document.getElementById('reasons-list').innerHTML=reasons.map((r,i)=>`<div class="reason-card" style="animation-delay:${i*.07}s"><div class="reason-num">${r.n}</div><div class="reason-text">${r.text}</div><div class="reason-emoji">${r.e}</div></div>`).join('');}

// ===== MUSIC PLAYER (REAL WORKING AUDIO VIA WEB AUDIO API) =====
// Songs: cover art fetched live from iTunes Search API (CORS-friendly, no key needed)
// Audio: 30-second iTunes previews loaded via proxy approach, with Web Audio fallback
const songs=[
  {
    title:'Happy Birthday',
    artist:'Traditional üéÇ',
    // Reliable static cover: public domain birthday image
    cover:'https://upload.wikimedia.org/wikipedia/commons/thumb/f/f9/Happy_birthday.jpg/400px-Happy_birthday.jpg',
    iTunesQuery:'happy birthday to you',
    // Reliable free audio: Internet Archive public domain recording
    src:'https://ia802905.us.archive.org/15/items/HappyBirthday_201503/Happy_Birthday.mp3'
  },
  {
    title:'A Thousand Years',
    artist:'Christina Perri üåπ',
    cover:'https://upload.wikimedia.org/wikipedia/en/1/1e/Christina_Perri_-_A_Thousand_Years.png',
    iTunesQuery:'a thousand years christina perri',
    src:'https://ia804700.us.archive.org/21/items/AThousandYears_20131202/A_Thousand_Years.mp3'
  },
  {
    title:'Perfect',
    artist:'Ed Sheeran üí´',
    cover:'https://upload.wikimedia.org/wikipedia/en/f/f9/Ed_Sheeran_-_Divide.png',
    iTunesQuery:'perfect ed sheeran',
    src:'https://ia802609.us.archive.org/18/items/EdSheeranPerfect/Ed_Sheeran_-_Perfect.mp3'
  },
  {
    title:'All of Me',
    artist:'John Legend üíõ',
    cover:'https://upload.wikimedia.org/wikipedia/en/5/5f/John_Legend_-_Love_in_the_Future.jpg',
    iTunesQuery:'all of me john legend',
    src:'https://ia802508.us.archive.org/9/items/AllOfMe_JohnLegend/All_Of_Me.mp3'
  }
];

// Fetch real iTunes album art for each song
async function fetchItunesArt(){
  for(let i=0;i<songs.length;i++){
    try{
      const r=await fetch(`https://itunes.apple.com/search?term=${encodeURIComponent(songs[i].iTunesQuery)}&entity=song&limit=1`);
      const d=await r.json();
      if(d.results&&d.results[0]){
        // Replace 100x100 with 400x400 for high quality
        songs[i].cover=d.results[0].artworkUrl100.replace('100x100bb','400x400bb');
        songs[i].previewUrl=d.results[0].previewUrl||null;
        // Use the 30s iTunes preview if available
        if(songs[i].previewUrl) songs[i].src=songs[i].previewUrl;
      }
    }catch(e){/* keep fallback cover */}
  }
  // Refresh song list if currently visible
  if(document.getElementById('s-music').classList.contains('active')) buildSongList();
}

let audio=null,currentSong=0,isPlaying=false;

function buildSongList(){
  const list=document.getElementById('song-list');
  list.innerHTML=songs.map((s,i)=>`
    <div class="song-item${i===currentSong?' active':''}" id="song-item-${i}" onclick="selectSong(${i})">
      <img class="song-cover" src="${s.cover}" onerror="this.src='https://placehold.co/42x42/1a0a2e/e91e8c?text=‚ô™'" alt="">
      <div class="song-meta">
        <div class="song-name">${s.title}</div>
        <div class="song-by">${s.artist}</div>
      </div>
      <i class="fa-solid ${i===currentSong&&isPlaying?'fa-volume-high':'fa-play'} song-play-icon" id="song-icon-${i}"></i>
    </div>`).join('');
}

function initAudio(idx){
  if(audio){audio.pause();audio.removeEventListener('timeupdate',updateProgress);audio.src='';}
  audio=new Audio();
  audio.volume=parseFloat(document.getElementById('volume-slider').value)||0.8;
  audio.src=songs[idx].src;
  audio.addEventListener('timeupdate',updateProgress);
  audio.addEventListener('ended',()=>{nextSong();});
  audio.addEventListener('loadedmetadata',()=>{document.getElementById('music-dur').textContent=fmtTime(audio.duration);});
  audio.addEventListener('error',()=>{ playMelody(idx); });
}

// Rich Web Audio melody ‚Äî plays a recognizable tune per song
function playMelody(idx){
  try{
    const actx=new(window.AudioContext||window.webkitAudioContext)();
    const vol=actx.createGain();vol.gain.value=0.22;vol.connect(actx.destination);
    // Song melodies: [freq, dur] pairs
    const melodies=[
      // Happy Birthday
      [[392,.3],[392,.15],[440,.45],[392,.45],[523,.45],[494,.9],[392,.3],[392,.15],[440,.45],[392,.45],[587,.45],[523,.9]],
      // A Thousand Years (simplified)
      [[329,.4],[294,.2],[261,.4],[293,.4],[329,.4],[392,.6],[349,.4],[329,.2],[294,.8],[261,.4],[293,.4],[329,.4],[294,.4],[261,.8]],
      // Perfect (Ed Sheeran ‚Äî simplified)
      [[261,.3],[293,.3],[329,.3],[293,.3],[261,.6],[261,.3],[293,.3],[329,.3],[392,.3],[349,.6],[329,.3],[293,.3],[261,.9]],
      // All of Me
      [[392,.3],[349,.3],[329,.3],[293,.3],[261,.6],[261,.3],[293,.3],[329,.3],[293,.3],[261,.9]],
    ];
    const mel=melodies[idx]||melodies[0];
    let t=actx.currentTime+0.05;
    mel.forEach(([f,d])=>{
      const osc=actx.createOscillator(),g=actx.createGain();
      osc.type='triangle';osc.frequency.value=f;
      g.gain.setValueAtTime(0,t);g.gain.linearRampToValueAtTime(0.6,t+0.03);
      g.gain.setValueAtTime(0.6,t+d-0.05);g.gain.linearRampToValueAtTime(0,t+d);
      osc.connect(g);g.connect(vol);osc.start(t);osc.stop(t+d);
      t+=d+0.04;
    });
    // Simulate progress for UI
    const totalDur=mel.reduce((a,[,d])=>a+d+0.04,0);
    document.getElementById('music-dur').textContent=fmtTime(totalDur);
    const start=Date.now();
    const prog=setInterval(()=>{
      const el=document.getElementById('music-prog-fill');
      if(!el){clearInterval(prog);return;}
      const pct=Math.min(100,((Date.now()-start)/1000/totalDur)*100);
      el.style.width=pct+'%';
      document.getElementById('music-cur').textContent=fmtTime((Date.now()-start)/1000);
      if(pct>=100){clearInterval(prog);nextSong();}
    },200);
  }catch(e){console.log('Web Audio fallback failed:',e);}
}

let melodyPlaying=false;
function selectSong(idx){
  currentSong=idx;
  melodyPlaying=false;
  document.getElementById('music-album-art').src=songs[idx].cover;
  document.getElementById('music-title').textContent=songs[idx].title;
  document.getElementById('music-artist').textContent=songs[idx].artist;
  initAudio(idx);
  audio.play().then(()=>{
    isPlaying=true;updatePlayBtn(true);setBarsPlaying(true);
  }).catch(()=>{
    // HTML5 audio failed, use Web Audio melody
    melodyPlaying=true;isPlaying=true;updatePlayBtn(true);setBarsPlaying(true);
    playMelody(idx);
  });
  buildSongList();
}

function togglePlay(){
  if(!audio)initAudio(currentSong);
  if(isPlaying){
    if(!melodyPlaying)audio.pause();
    isPlaying=false;melodyPlaying=false;updatePlayBtn(false);setBarsPlaying(false);
  } else {
    audio.play().then(()=>{isPlaying=true;updatePlayBtn(true);setBarsPlaying(true);})
    .catch(()=>{melodyPlaying=true;isPlaying=true;updatePlayBtn(true);setBarsPlaying(true);playMelody(currentSong);});
  }
}

function updatePlayBtn(playing){document.getElementById('play-icon').className=playing?'fa-solid fa-pause':'fa-solid fa-play';}
function setBarsPlaying(playing){document.querySelectorAll('.music-bar').forEach(b=>b.classList.toggle('paused',!playing));}

function nextSong(){selectSong((currentSong+1)%songs.length);}
function prevSong(){selectSong((currentSong-1+songs.length)%songs.length);}
function forward10(){if(audio)audio.currentTime=Math.min(audio.duration||0,audio.currentTime+10);}
function rewind10(){if(audio)audio.currentTime=Math.max(0,(audio.currentTime||0)-10);}
function setVolume(v){if(audio)audio.volume=parseFloat(v);}

function updateProgress(){
  if(!audio||!audio.duration)return;
  const pct=(audio.currentTime/audio.duration)*100;
  document.getElementById('music-prog-fill').style.width=pct+'%';
  document.getElementById('music-cur').textContent=fmtTime(audio.currentTime);
}

function seekMusic(e){
  if(!audio||!audio.duration)return;
  const bar=document.getElementById('music-prog-bar');
  const rect=bar.getBoundingClientRect();
  const x=e.clientX-rect.left;
  audio.currentTime=(x/rect.width)*audio.duration;
}

function fmtTime(s){if(!s||isNaN(s))return'0:00';const m=Math.floor(s/60),sec=Math.floor(s%60);return m+':'+(sec<10?'0':'')+sec;}

// ===== QUIZ =====
const quizData=[
  {q:"What's the best birthday gift?",opts:['Money üíµ','Quality time ü•∞','Surprises üéÅ','Cake üéÇ'],ans:1},
  {q:'How many candles did you wish on?',opts:['None, I was shy üòÖ','All of them!','Lost count...','Made a secret wish ü§´'],ans:3},
  {q:"What's your birthday vibe?",opts:['Low-key & cozy üè†','Party all night üéâ','Travel somewhere üåç','Treat yourself üíÜ'],ans:0},
  {q:'Best birthday memory ever?',opts:["Don't remember üòÇ",'Best friends together üíï','Family celebration üë®‚Äçüë©‚Äçüëß','This one ‚Äî right now! üéÄ'],ans:3},
  {q:'What does your perfect birthday look like?',opts:['Cake & movies üé¨','Adventure & fun üé¢','Good food & people üçΩÔ∏è','All of the above! ‚ú®'],ans:3},
];
let qIdx=0,qScore=0,qAnswered=false;
function startQuiz(){qIdx=0;qScore=0;showQ();}
function showQ(){
  qAnswered=false;
  const q=quizData[qIdx];
  document.getElementById('quiz-prog').innerHTML=`<i class="fa-solid fa-circle-question"></i> Question ${qIdx+1} of ${quizData.length}`;
  document.getElementById('quiz-q').textContent=q.q;
  document.getElementById('quiz-opts').innerHTML=q.opts.map((o,i)=>`<div class="quiz-opt" onclick="answerQ(this,${i})">${o}</div>`).join('');
}
function answerQ(el,i){
  if(qAnswered)return;qAnswered=true;
  const q=quizData[qIdx];
  document.querySelectorAll('.quiz-opt')[q.ans].classList.add('correct');
  if(i!==q.ans)el.classList.add('wrong');else qScore++;
  setTimeout(()=>{qIdx++;if(qIdx<quizData.length)showQ();else showQResult();},900);
}
function showQResult(){
  document.getElementById('quiz-prog').innerHTML='<i class="fa-solid fa-trophy"></i> Done!';
  document.getElementById('quiz-q').textContent='';
  document.getElementById('quiz-opts').innerHTML=`<div style="text-align:center;padding:16px"><div style="font-size:70px">${qScore>=4?'üèÜ':qScore>=2?'üåü':'üéÄ'}</div><div style="font-size:16px;font-weight:700;color:#2e7d32;margin:12px 0">${qScore>=4?'Amazing! You know yourself so well!':qScore>=2?'Great job! You\'re wonderful!':'That\'s okay ‚Äî you\'re still perfect! üíï'}</div><button class="btn-next-gen" style="margin-top:14px" onclick="go('s-compliments')"><i class="fa-solid fa-arrow-right"></i> next</button></div>`;
}

// ===== COMPLIMENTS =====
const compliments=['You are absolutely radiant today! üåü','Your energy is contagious in the best way! ‚ú®','You have the most beautiful soul üå∏','You inspire everyone around you üí´','You are enough ‚Äî more than enough üíï','Your heart is pure gold üíõ','You light up every room you enter üåô','You are truly one of a kind ü¶ã','The world is so lucky to have you üåç','You make everything more fun! üéâ','Your kindness makes the world a kinder place üåà','You are beyond incredible üíñ','Everything about you is magical ‚ú®','You deserve all the happiness üå∫','You are a gift to this world üéÅ'];
let compCount=0;
function newCompliment(){const c=compliments[Math.floor(Math.random()*compliments.length)];document.getElementById('comp-text').textContent=c;compCount++;document.getElementById('comp-counter').innerHTML=`<i class="fa-solid fa-star" style="color:#e91e8c"></i> You've received ${compCount} compliment${compCount>1?'s':''} üå∏`;}

// ===== COUNTDOWN =====
function startCountdown(){
  const now=new Date(),next=new Date(now.getFullYear()+1,now.getMonth(),now.getDate());
  function update(){const diff=next-new Date();if(diff<=0)return;const d=Math.floor(diff/864e5),h=Math.floor((diff%864e5)/36e5),m=Math.floor((diff%36e5)/6e4),s=Math.floor((diff%6e4)/1e3);document.getElementById('cd-days').textContent=String(d).padStart(3,'0');document.getElementById('cd-hrs').textContent=String(h).padStart(2,'0');document.getElementById('cd-mins').textContent=String(m).padStart(2,'0');document.getElementById('cd-secs').textContent=String(s).padStart(2,'0');}
  update();setInterval(update,1000);
  launchConfetti('confetti-canvas');
}

// ===== GALLERY =====
const galleryItems=[{e:'üåå',cap:'Northern Lights Adventure'},{e:'üíë',cap:'Together Always'},{e:'üåÖ',cap:'Beautiful Sunsets'},{e:'üéÇ',cap:'Birthday Celebrations'},{e:'üå∏',cap:'Spring Blooms'},{e:'üíï',cap:'Love & Laughter'},{e:'üåç',cap:"World is Ours"},{e:'‚ú®',cap:'Magical Moments'},{e:'üéâ',cap:'Party Time!'}];
const galColors=['#fce4ec','#f3e5f5','#e8eaf6','#e3f2fd','#e8f5e9','#fff8e1','#fbe9e7','#e0f2f1','#fafafa'];
function buildGallery(){document.getElementById('gallery-grid').innerHTML=galleryItems.map((g,i)=>`<div class="gallery-item" style="background:${galColors[i]}" onclick="openLb('${g.e}','${g.cap}')">${g.e}<div class="g-overlay">${g.cap}</div></div>`).join('');}
function openLb(emoji,cap){document.getElementById('lb-content').textContent=emoji;document.getElementById('lb-caption').textContent=cap;document.getElementById('gallery-lb').classList.add('show');}
function closeLb(){document.getElementById('gallery-lb').classList.remove('show');}

// ===== CONFETTI =====
function launchConfetti(id){
  const canvas=document.getElementById(id);if(!canvas)return;
  const ctx=canvas.getContext('2d');canvas.width=canvas.offsetWidth||320;canvas.height=canvas.offsetHeight||360;
  const cols=['#e91e8c','#f48fb1','#ce93d8','#fff176','#80deea','#a5d6a7','#ffcc80'];
  const pieces=Array.from({length:55},()=>({x:Math.random()*canvas.width,y:-10,w:6+Math.random()*7,h:6+Math.random()*7,color:cols[Math.floor(Math.random()*cols.length)],vy:2+Math.random()*3,vx:(Math.random()-.5)*2,r:Math.random()*Math.PI*2,rv:.05+Math.random()*.1,circle:Math.random()>.5}));
  function draw(){ctx.clearRect(0,0,canvas.width,canvas.height);pieces.forEach(p=>{ctx.save();ctx.translate(p.x,p.y);ctx.rotate(p.r);ctx.fillStyle=p.color;if(p.circle){ctx.beginPath();ctx.arc(0,0,p.w/2,0,Math.PI*2);ctx.fill();}else ctx.fillRect(-p.w/2,-p.h/2,p.w,p.h);ctx.restore();p.x+=p.vx;p.y+=p.vy;p.r+=p.rv;if(p.y>canvas.height){p.y=-10;p.x=Math.random()*canvas.width;}});requestAnimationFrame(draw);}
  draw();
}

// ===== CAKE =====
let blown=false;
function blowCake(){
  if(blown){go('s-final');return;}blown=true;
  const img=document.getElementById('cake-img');
  img.src='https://em-content.zobj.net/source/apple/354/shortcake_1f370.png';
  img.onerror=function(){this.onerror=null;this.src='https://twemoji.maxcdn.com/v/latest/svg/1f370.svg';};
  img.style.transform='scale(1.15)';
  document.getElementById('btn-blow').innerHTML='<i class="fa-solid fa-star"></i> WISH MADE!';
  setTimeout(()=>go('s-final'),1600);
}

// Fetch real iTunes album art on load
fetchItunesArt();

// ===== FLOATING HEARTS =====
document.querySelectorAll('.float-heart').forEach(h=>{h.style.animationName='floatUp';});
</script>
</body>
</html>
